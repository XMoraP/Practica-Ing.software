<!DOCTYPE html>
<html lang="es">

<head>
    <!-- Meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- Title and favicon -->
    <title>Grupos de estudio</title>
    <link rel="icon" href="../static/images/logoUniConnect.png" type="image/png">

    <!-- CSS files -->
    <link rel="stylesheet" href="../static/fonts/flaticon.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="./static/css/bootstrap.min.css">
    <link rel="stylesheet" href="./static/css/style.css">
    <link rel="stylesheet" href="./static/css/responsive.css">
    <link rel="stylesheet" href="./static/css/color_2.css">
    <link rel="stylesheet" href="./static/css/bootstrap-select.css">
    <link rel="stylesheet" href="./static/css/perfect-scrollbar.css">
    <link rel="stylesheet" href="./static/css/custom.css">
    <link rel="stylesheet" href="./static/css/semantic.min.css">
    <link rel="stylesheet" href="./static/css/jquery.fancybox.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.4.0/fullcalendar.css" />
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

    <!-- Custom styles -->
    <!--style>
        .btn-warning {
            background-color: #ffc107;
            color: #212529;
            border: 1px solid #ffc107;
            padding: auto;
            margin: 20px;
        }

        .btn-warning:hover {
            background-color: #e0a800;
            border: 1px solid #e0a800;
            color: #212529;
        }

        #exampleModalCenter {
            background-color: whitesmoke;
            padding: auto;
            margin: auto;
        }

        #exampleModalCenter .modal-header {
            background-color: #007bff;
            color: #fff;
        }

        #exampleModalCenter .modal-body {
            background-color: #ffffff;
            color: #000000;
        }

        #studyGroupForm {
            margin-bottom: 0;
        }

        #studyGroupForm input,
        #studyGroupForm textarea {
            margin-bottom: 10px;
        }

        #createGroupBtn {
            background-color: #28a745;
            color: #fff;
            border: 1px solid #28a745;
        }

        #createGroupBtn:hover {
            background-color: #218838;
            border: 1px solid #218838;
        }
    </style-->

</head>
   
   <body class="dashboard dashboard_1">
      <div class="full_container">
         <div class="inner_container">
            <!-- Sidebar  -->
            <nav id="sidebar">
               <div class="sidebar_blog_1">
                  <div class="sidebar-header">
                     <div class="logo_section">
                     </div>
                  </div>
                  <div class="sidebar_user_info">
                     <div class="icon_setting"></div>
                     <div class="user_profle_side">
                        <div class="user_img"><img class="img-responsive" src="/cargar_imagen" alt="#" /></div>
                        <!--div class="user_info">
                           <h6>{{ user_profile['name'] }} {{ user_profile['last_name'] }}</h6>
                           <p><span class="online_animation"></span> {{ user_profile['status'] }} </p>
                        </div-->
                     </div>
                  </div>
               </div>
               <div class="sidebar_blog_2">
                  <h4>General</h4>
                  <ul class="list-unstyled components">
                     <li class="active">
                        <a href="/dashboard"><i class="fas fa-house-user blue1_color"></i> <span>Inicio</span></a>
                     </li>
                     <li><a href="/tables"><i class="fas fa-book orange_color"></i> <span>Archivos</span></a></li>
                     <li><a href="/contact"><i class="fa fa-paper-plane red_color"></i> <span>Tutores</span></a></li>
                     <li><a href="/profile"><i class="fas fa-user" style="color: #1de2de;"></i> <span>Perfil</span></a></li>
                     <li><a href="/estudio"><i class="fas fa-graduation-cap" style="--fa-primary-color: #22511f; --fa-secondary-color: #2cca21;"></i> <span>Estudio</span></a></li>
                     <li><a href="/podcast"><i class="fas fa-microphone purple_color"></i> <span>Podcast</span></a></li>
                     <li><a href="/chatbot"><i class="fas fa-robot" style="color: #2f73e9;"></i> <span>Chatbot</span></a></li>
                  </ul>
               </div>
            </nav>
            <!-- end sidebar -->
            <!-- right content -->
            <div id="content">
               <!-- topbar -->
               <div class="topbar">
                  <nav class="navbar navbar-expand-lg navbar-light">
                     <div class="full">
                        <button type="button" id="sidebarCollapse" class="sidebar_toggle"><i class="fa fa-bars"></i></button>
                        <div class="logo_section">
                           <a href="/dashboard"><img class="img-responsive" src="../static/images/logoUniConnect.png" alt="#" /></a>
                           <h4>Uniconnect</h4>
                       </div>
                        <div class="right_topbar">
                           <div class="icon_info">
                              <ul>
                                 <li><a href="#"><i class="fas fa-bell"></i><span class="badge"></span></a></li>
                                 <li><a href="#"><i class="fas fa-question-circle"></i></a></li>
                                 <li><a href="#"><i class="fas fa-envelope"></i><span class="badge"></span></a></li>
                              </ul>
                              <ul class="user_profile_dd">
                                 <li>
                                    <a class="dropdown-toggle" data-toggle="dropdown">
                                       <!--span class="name_user">{{ user_profile['name'] }} {{ user_profile['last_name'] }}</span></a-->
                                    <div class="dropdown-menu">
                                       <a class="dropdown-item" href="/profile">Perfil</a>
                                       <a class="dropdown-item" href="/salir" formaction="/salir"><span>Salir</span> <i class="fas fa-sign-out-alt"></i></a>
                                    </div>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div>
                  </nav>
               </div>
               <!-- end topbar -->
                  
               <!-- Dashboard inner -->
               <div class="midde_cont">
                  <div class="container-fluid">

                     <div class="page_title">
                        <h2>Grupos de Estudio</h2>
                     </div>

                     <div class="col-md-4 mb-3">
                        <!-- Button to trigger modal -->
                        <button type="button" class="btn btn-primary" id="createGroupBtn" data-toggle="modal" data-target="#createStudyGroupModal">
                           Create Study Group
                        </button>                     
                     </div>

                     <!-- Modal -->
                     <div class="modal fade" id="createStudyGroupModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                           <div class="modal-content">
                              <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Create Study Group</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                       <span aria-hidden="true">&times;</span>
                                    </button>
                              </div>
                              <div class="modal-body">
                                    <!-- Form for study group information -->
                                    <form id="studyGroupForm" action="/estudio" method="post">
                                       <!-- Add a CSRF token for security -->
                                       <!--input type="hidden" name="_csrf_token" value="{{ csrf_token() }}"-->
                                       
                                       <div class="form-group">
                                          <label for="titulo">Titulo:</label>
                                          <input type="text" class="form-control" id="titulo" name="titulo" required>
                                       </div>
                                       <div class="form-group">
                                          <label for="asignatura">Asignatura:</label>
                                          <input type="text" class="form-control" id="asignatura" name="asignatura" required>
                                       </div>
                                       <div class="form-group">
                                          <label for="descripcion">Descripcion:</label>
                                          <textarea class="form-control" id="descripcion" name="descripcion" rows="3" required></textarea>
                                       </div>
                                       <div class="form-group">
                                          <label for="ubicacion">Ubicacion:</label>
                                          <input type="text" class="form-control" id="ubicacion" name="ubicacion" required>
                                       </div>
                                       <div class="form-group">
                                          <label for="dias">Dias:</label>
                                          <input type="date" class="form-control" id="dias" name="dias" required>
                                       </div>
                                       <div class="form-group">
                                          <label for="hora">Hora:</label>
                                          <input type="time" class="form-control" id="hora" name="hora" required>
                                       </div>
                                       <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                                       <button type="submit" class="btn btn-primary">Crear grupo de estudio</button>
                                    </form>
                              </div>
                           </div>
                        </div>
                     </div>

                     <!-- Display created study groups as containers -->
                     <div id="studyGroupsContainer">
                        {% for group in study_groups %}
                           <div class="card">
                              <div class="card-body">
                                    <h5 class="card-title">{{ group.titulo }}</h5>
                                    <p class="card-text">{{ group.asignatura }}</p>
                                    <!-- Add more details as needed -->
                              </div>
                           </div>
                        {% endfor %}
                     </div>

                  </div>
               </div>
               <!-- end middle content -->
            </div>
            <!-- end content -->
         </div>
      </div>

      <!-- jQuery and Bootstrap scripts -->
      <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
      <!-- jQuery -->
      <script src="./static/js/jquery.min.js"></script>
      <script src="./static/js/popper.min.js"></script>
      <script src="./static/js/bootstrap.min.js"></script>
      <!-- wow animation -->
      <script src="./static/js/animate.js"></script>
      <!-- select country -->
      <script src="./static/js/bootstrap-select.js"></script>
      <!-- owl carousel -->
      <script src="./static/js/owl.carousel.js"></script> 
      <!-- chart js -->
      <script src="./static/js/Chart.min.js"></script>
      <script src="./static/js/Chart.bundle.min.js"></script>
      <script src="./static/js/utils.js"></script>
      <script src="./static/js/analyser.js"></script>
      <!-- nice scrollbar -->
      <script src="./static/js/perfect-scrollbar.min.js"></script>
      <script>
         var ps = new PerfectScrollbar('#sidebar');
      </script>
      <!-- fancy box js -->
      <script src="./static/js/jquery.fancybox.min.js"></script>
      <!-- custom js -->
      <script src="./static/js/custom.js"></script>
      <script src="./static/js/custom2.js"></script>
      <!-- calendar file css -->    
      <script src="./static/js/semantic.min.js"></script>
      <!--js de crear eventos-->
      <script src="./static/js/events.js"></script>
      <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.4.0/fullcalendar.min.js"></script>
      <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>     
      
      
      <!--JavaScript to handle the creation of the study groups and storing in the table study_groups-->
      <script>
         // Update the event listener to form submission
         studyGroupForm.onsubmit = function (event) {
            event.preventDefault(); // Prevent the default form submission

            // Get the values from the form
            var titulo = document.getElementById("titulo").value;
            var asignatura = document.getElementById("asignatura").value;
            var descripcion = document.getElementById("descripcion").value;
            var ubicacion = document.getElementById("ubicacion").value;
            var dias = document.getElementById("dias").value;
            var hora = document.getElementById("hora").value;

            // Create a new study group object
            var studyGroup = {
               titulo: titulo,
               asignatura: asignatura,
               descripcion: descripcion,
               ubicacion: ubicacion,
               dias: dias,
               hora: hora
            };

            // Send the study group object to the server
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/estudio", true);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.send(JSON.stringify(studyGroup));

            xhr.onload = function () {
               if (xhr.status >= 200 && xhr.status < 300) {
                  // Request was successful, handle accordingly
                  console.log('Study group created successfully');
               } else {
                  // Request failed
                  console.error('Error creating study group:', xhr.statusText);
               }
            };

            xhr.onerror = function () {
               // There was a network error
               console.error('Network error while creating study group');
            };

            // Clear the form
            studyGroupForm.reset();
         }
      </script>

   </body>
</html>
